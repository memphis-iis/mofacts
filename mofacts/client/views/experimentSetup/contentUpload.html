<!-- Content (TDF and Stim) File Uploading Template -->

<template name="contentUpload">
    <div class="container-fluid" style="padding: 0% 10%;">
        <div class="header-box">
            <h1 class="text-center">Asset Manager</h1>
        </div>
            This manages your assets, lessons, and stimuli for use in experiments. It can also upload packaged zip files with TDF/stim/asset combinations. 
            You may use video, audio, or image files as well. Please wait until a prompt is given to navigate to a new page.
        <div class="vh-5"></div>
        <div class="row">
            <h3 class="text-center">Your Assets</h3>
            <p>Deleting is not recoverable. Deleting stimuli will remove all related lessons and results.</p>

        
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr>
                        <th class="col-2">Type</th>
                        <th class="col-6">Name</th>
                        <th class="col-2">Download</th>
                        <th class="col-2">Delete</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each TdfFiles}}
                        <tr>
                            <td>tdf</td>
                            <td>{{content.fileName}}</td>
                            <td><button id="tdf-download-btn" value="{{_id}}" class="btn-icon"><span class="fa fa-download" aria-hidden="true"></span></button></td>
                            <td><button id="tdf-delete-btn" value="{{_id}}" data-filename="{{fileName}}" class="btn-icon"><span class="fa fa-minus" aria-hidden="true"></span></button></td>
                        </tr>
                    {{/each}}
                    {{#each StimFiles}}
                        <tr>
                            <td>stim</td>
                            <td>{{this.fileName}}</td>
                            <td><button id="stim-download-btn" value="{{stimuliSetId}}" class="btn-icon"><span class="fa fa-download" aria-hidden="true"></span></button></td>
                            <td><button id="stim-delete-btn" value="{{stimuliSetId}}" data-filename="{{fileName}}" class="btn-icon"><span class="fa fa-minus" aria-hidden="true"></span></button></td>
                        </tr>
                    {{/each}}
                    {{#each assets}}
                        <tr>
                            <td>
                                {{ext}}
                            </td>
                            <td>
                                {{name}}
                            </td>
                            <td>
                                <a href="{{link}}" download="{{name}}" target="_parent">
                                    <button id="assetDownloadButton" value="{{_id}}" class="btn-icon"><span class="fa fa-download" aria-hidden="true"></span></button>
                                </a>
                            </td>
                            <td><button id="assetDeleteButton" value="{{_id}}" data-id="{{_id}}" class="btn-icon"><span class="fa fa-minus" aria-hidden="true"></span></button></td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        <div class="row"> 
            <div class="col text-center ">
                <h3 class="text-center">Upload Asset</h3>
                <div class="row text-center">
                    <div class="vh-5"></div>
                    <div class="row">
                        <input type="file" class="form-control" name="upload-file" id="upload-file" value="" placeholder="ZIP, JSON File" multiple>
                    </div>
                    <div class="vh-5"></div>
                    {{#if curFilesToUpload}}
                    <div class="row">
                        <h4>Files in Queue:</h4>
                            {{#each curFilesToUpload}}
                                {{this.name}}<br>
                            {{/each}}
                    </div>
                    {{/if}}
                    <div class="vh-5"></div>
                    <div class="row">
                        <button type='button' id='doUpload' class='btn'>
                            Upload Asset File(s)
                            <div class="loader" id='stimUploadLoadingSymbol' style="margin-top: 1%" hidden></div>
                        </button>
                    </div>
                </div>
            </div>
        </div> 
        <div class="vh-5"></div>
            <div class="row">
        </div>

        {{#if isInRole 'admin'}}
        <h3 class="text-center">Admin Functions</h3>
            <p>
                This will delete all files. It will remove image and media assets, but will not remove lessons (TDFs) or stimuli from the database.
            </p>
            <button class="btn width-80-percent" id="deleteAllAssetsPrompt">Delete All Uploaded Files. </button>
                <button class="btn width-80-percent" style="display: none;" id="deleteAllAssetsConfirm" hidden>Are you sure? This is NOT recoverable.</button>
        {{/if}}
    </div>
</template>

<template name="instructorReporting">
{{#if isInRole 'admin, teacher'}}
  <br /><br />
    <legend class="text-center">Instructor Reporting</legend>
    <div id="mainContent">
      <h3>Class Selection</h3>
      <ul class="nav nav-tabs">
        {{#each classes}}
          <li><a data-toggle="tab" href="#{{this.courseId}}" class="myNavTab">{{this.courseName}}</a></li>
        {{/each}}
      </ul>
      <div>
        <h3>Select Chapter</h3>
        <select id="tdf-select">
            <option selected="selected" value="invalid" disabled="true">Select a tdf</option>
            <option value="xml">All</option>
            {{#each curInstructorReportingTdfs}}
              <option value="{{this.tdfid}}">{{this.displayname}}</option>
            {{/each}}
        </select>
        {{#if performanceLoading}}
          <p>Loading reports...</p>
        {{/if}}
      </div>
      <div>
        <h3>Practice Deadline</h3>
        <input type="date" id="practice-deadline-date"
          value="2021-01-01" 
          name="practice-deadline-date-select">
      </div>
      <div>
        <h3>Practice Time Threshold</h3>
        <select id="practice-time-select">
          <option value="10">10 min</option>
          <option value="20">20 min</option>
          <option value="30">30 min</option>
          <option value="40">40 min</option>
          <option value="50">50 min</option>
          <option value="60">60 min</option>
          <option value="70">70 min</option>
          <option value="80">80 min</option>
          <option value="90">90 min</option>
        </select>
      </div>
      <h3>Class Data</h3>
        <table border="1">
          <tr><th class="thWide">ID</th><th class="thWide">% Correct</th><th class="thWide">Count</th><th>Total Time (minutes)</th><th>Completed Before Deadline</th></tr>
          {{#each curClassStudentPerformance}}
            <tr>
              <td><a onclick="navigateToStudentReporting('{{this.username}}')">{{this.username}}</a></td>
              <td>{{this.percentCorrect}}</td>
              <td>{{this.count}}</td>
              <td>{{this.totalTime}}</td>
              <td>{{getUserMetThresholdStatus this.userId}}</td>
            </tr>
          {{/each}}
          <tr>
            <td>Total</td>
            <td>{{curClassPerformance.percentCorrect}}</td>
            <td>{{curClassPerformance.count}}</td>
            <td>{{curClassPerformance.totalTime}}</td>
          </tr>
        </table>
    </div>
{{/if}}
</template>

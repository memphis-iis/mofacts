{"version":3,"sources":["meteor://ðŸ’»app/packages/minifier-js/minifier.js"],"names":["module","export","meteorJsMinify","terser","source","result","NODE_ENV","process","env","Npm","require","options","compress","drop_debugger","unused","dead_code","global_defs","safari10","terserResult","minify","error","code","minifier"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,gBAAc,EAAC,MAAIA;AAApB,CAAd;AAAA,IAAIC,MAAJ;;AAEA,MAAMD,cAAc,GAAG,UAAUE,MAAV,EAAkB;AACvC,QAAMC,MAAM,GAAG,EAAf;AACA,QAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYF,QAAZ,IAAwB,aAAzC;AACAH,QAAM,GAAGA,MAAM,IAAIM,GAAG,CAACC,OAAJ,CAAY,QAAZ,CAAnB;AAEA,QAAMC,OAAO,GAAG;AACdC,YAAQ,EAAE;AACRC,mBAAa,EAAE,KADP;AACe;AACvBC,YAAM,EAAE,KAFA;AAEe;AACvBC,eAAS,EAAE,IAHH;AAGe;AACvBC,iBAAW,EAAE;AACX,gCAAwBV;AADb;AAJL,KADI;AASd;AACA;AACA;AACAW,YAAQ,EAAE,IAZI,CAYW;;AAZX,GAAhB;AAeA,QAAMC,YAAY,GAAGf,MAAM,CAACgB,MAAP,CAAcf,MAAd,EAAsBO,OAAtB,CAArB,CApBuC,CAsBvC;;AACA,MAAIO,YAAY,CAACE,KAAjB,EAAwB,MAAMF,YAAY,CAACE,KAAnB,CAvBe,CAyBvC;;AACAf,QAAM,CAACgB,IAAP,GAAcH,YAAY,CAACG,IAA3B;AACAhB,QAAM,CAACiB,QAAP,GAAkB,QAAlB;AAEA,SAAOjB,MAAP;AACD,CA9BD,C","file":"/packages/minifier-js.js","sourcesContent":["let terser;\n\nconst meteorJsMinify = function (source) {\n  const result = {};\n  const NODE_ENV = process.env.NODE_ENV || \"development\";\n  terser = terser || Npm.require(\"terser\");\n\n  const options = {\n    compress: {\n      drop_debugger: false,  // remove debugger; statements\n      unused: false,         // drop unreferenced functions and variables\n      dead_code: true,       // remove unreachable code\n      global_defs: {\n        \"process.env.NODE_ENV\": NODE_ENV\n      }\n    },\n    // Fix issue #9866, as explained in this comment:\n    // https://github.com/mishoo/UglifyJS2/issues/1753#issuecomment-324814782\n    // And fix terser issue #117: https://github.com/terser-js/terser/issues/117\n    safari10: true,          // set this option to true to work around the Safari 10/11 await bug\n  };\n\n  const terserResult = terser.minify(source, options);\n\n  // the terser api doesnt throw exceptions, so we throw one ourselves\n  if (terserResult.error) throw terserResult.error;\n\n  // this is kept to maintain backwards compatability\n  result.code = terserResult.code;\n  result.minifier = 'terser';\n\n  return result;\n};\n\nexport { meteorJsMinify };\n"]}
{"version":3,"sources":["/tools/tool-env/install-babel.js"],"names":["babelRegister","meteorBabel","require","path","toolsPath","dirname","__dirname","meteorPath","cacheDir","join","babelOptions","getDefaultOptions","nodeMajorVersion","parseInt","process","versions","node","typescript","sourceMaps","setCacheDirectory","allowDirectory","setSourceMapRootPath","setBabelOptions"],"mappings":"AAAA;AACA;AAEA;;AAEA,SAASA,aAAT,GAAyB;AACvB,QAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;AACA,QAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,QAAME,SAAS,GAAGD,IAAI,CAACE,OAAL,CAAaC,SAAb,CAAlB;AACA,QAAMC,UAAU,GAAGJ,IAAI,CAACE,OAAL,CAAaD,SAAb,CAAnB;AACA,QAAMI,QAAQ,GAAGL,IAAI,CAACM,IAAL,CAAUF,UAAV,EAAsB,cAAtB,CAAjB;AACA,QAAMG,YAAY,GAAGT,WAAW,CAACU,iBAAZ,CAA8B;AACjDC,IAAAA,gBAAgB,EAAEC,QAAQ,CAACC,OAAO,CAACC,QAAR,CAAiBC,IAAlB,CADuB;AAEjDC,IAAAA,UAAU,EAAE;AAFqC,GAA9B,CAArB,CANuB,CAWvB;AACA;;AACAP,EAAAA,YAAY,CAACQ,UAAb,GAA0B,QAA1B;;AAEAhB,EAAAA,OAAO,CAAC,uBAAD,CAAP,CACGiB,iBADH,CACqBX,QADrB,EAEGY,cAFH,CAEkBhB,SAFlB,EAGGiB,oBAHH,CAGwBd,UAHxB,EAIGe,eAJH,CAImBZ,YAJnB;AAKD;;AAIDR,OAAO,CAAC,sBAAD,CAAP","sourcesContent":["// This file exists because it is the file in the tool that is not automatically\n// transpiled by Babel\n\n\"use strict\";\n\nfunction babelRegister() {\n  const meteorBabel = require(\"meteor-babel\");\n  const path = require(\"path\");\n  const toolsPath = path.dirname(__dirname);\n  const meteorPath = path.dirname(toolsPath);\n  const cacheDir = path.join(meteorPath, \".babel-cache\");\n  const babelOptions = meteorBabel.getDefaultOptions({\n    nodeMajorVersion: parseInt(process.versions.node),\n    typescript: true\n  });\n\n  // Make sure that source maps are included in the generated code for\n  // meteor/tools modules.\n  babelOptions.sourceMaps = \"inline\";\n\n  require('meteor-babel/register')\n    .setCacheDirectory(cacheDir)\n    .allowDirectory(toolsPath)\n    .setSourceMapRootPath(meteorPath)\n    .setBabelOptions(babelOptions);\n}\n\n\n\nrequire(\"./install-runtime.js\");\n"],"file":"tools/tool-env/install-babel.js.map"}
(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var ECMAScript = Package.ecmascript.ECMAScript;
var meteorInstall = Package.modules.meteorInstall;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var Base64;

var require = meteorInstall({"node_modules":{"meteor":{"base64":{"base64.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                        //
// packages/base64/base64.js                                                              //
//                                                                                        //
////////////////////////////////////////////////////////////////////////////////////////////
                                                                                          //
module.export({
  Base64: () => Base64
});
// Base 64 encoding
const BASE_64_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
const BASE_64_VALS = Object.create(null);

const getChar = val => BASE_64_CHARS.charAt(val);

const getVal = ch => ch === '=' ? -1 : BASE_64_VALS[ch];

for (let i = 0; i < BASE_64_CHARS.length; i++) {
  BASE_64_VALS[getChar(i)] = i;
}

;

const encode = array => {
  if (typeof array === "string") {
    const str = array;
    array = newBinary(str.length);

    for (let i = 0; i < str.length; i++) {
      const ch = str.charCodeAt(i);

      if (ch > 0xFF) {
        throw new Error("Not ascii. Base64.encode can only take ascii strings.");
      }

      array[i] = ch;
    }
  }

  const answer = [];
  let a = null;
  let b = null;
  let c = null;
  let d = null;

  for (let i = 0; i < array.length; i++) {
    switch (i % 3) {
      case 0:
        a = array[i] >> 2 & 0x3F;
        b = (array[i] & 0x03) << 4;
        break;

      case 1:
        b = b | array[i] >> 4 & 0xF;
        c = (array[i] & 0xF) << 2;
        break;

      case 2:
        c = c | array[i] >> 6 & 0x03;
        d = array[i] & 0x3F;
        answer.push(getChar(a));
        answer.push(getChar(b));
        answer.push(getChar(c));
        answer.push(getChar(d));
        a = null;
        b = null;
        c = null;
        d = null;
        break;
    }
  }

  if (a != null) {
    answer.push(getChar(a));
    answer.push(getChar(b));

    if (c == null) {
      answer.push('=');
    } else {
      answer.push(getChar(c));
    }

    if (d == null) {
      answer.push('=');
    }
  }

  return answer.join("");
}; // XXX This is a weird place for this to live, but it's used both by
// this package and 'ejson', and we can't put it in 'ejson' without
// introducing a circular dependency. It should probably be in its own
// package or as a helper in a package that both 'base64' and 'ejson'
// use.


const newBinary = len => {
  if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined') {
    const ret = [];

    for (let i = 0; i < len; i++) {
      ret.push(0);
    }

    ret.$Uint8ArrayPolyfill = true;
    return ret;
  }

  return new Uint8Array(new ArrayBuffer(len));
};

const decode = str => {
  let len = Math.floor(str.length * 3 / 4);

  if (str.charAt(str.length - 1) == '=') {
    len--;

    if (str.charAt(str.length - 2) == '=') {
      len--;
    }
  }

  const arr = newBinary(len);
  let one = null;
  let two = null;
  let three = null;
  let j = 0;

  for (let i = 0; i < str.length; i++) {
    const c = str.charAt(i);
    const v = getVal(c);

    switch (i % 4) {
      case 0:
        if (v < 0) {
          throw new Error('invalid base64 string');
        }

        one = v << 2;
        break;

      case 1:
        if (v < 0) {
          throw new Error('invalid base64 string');
        }

        one = one | v >> 4;
        arr[j++] = one;
        two = (v & 0x0F) << 4;
        break;

      case 2:
        if (v >= 0) {
          two = two | v >> 2;
          arr[j++] = two;
          three = (v & 0x03) << 6;
        }

        break;

      case 3:
        if (v >= 0) {
          arr[j++] = three | v;
        }

        break;
    }
  }

  return arr;
};

const Base64 = {
  encode,
  decode,
  newBinary
};
////////////////////////////////////////////////////////////////////////////////////////////

}}}}},{
  "extensions": [
    ".js",
    ".json"
  ]
});

var exports = require("/node_modules/meteor/base64/base64.js");

/* Exports */
Package._define("base64", exports, {
  Base64: Base64
});

})();

//# sourceURL=meteor://ðŸ’»app/packages/base64.js
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGVvcjovL/CfkrthcHAvcGFja2FnZXMvYmFzZTY0L2Jhc2U2NC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnQiLCJCYXNlNjQiLCJCQVNFXzY0X0NIQVJTIiwiQkFTRV82NF9WQUxTIiwiT2JqZWN0IiwiY3JlYXRlIiwiZ2V0Q2hhciIsInZhbCIsImNoYXJBdCIsImdldFZhbCIsImNoIiwiaSIsImxlbmd0aCIsImVuY29kZSIsImFycmF5Iiwic3RyIiwibmV3QmluYXJ5IiwiY2hhckNvZGVBdCIsIkVycm9yIiwiYW5zd2VyIiwiYSIsImIiLCJjIiwiZCIsInB1c2giLCJqb2luIiwibGVuIiwiVWludDhBcnJheSIsIkFycmF5QnVmZmVyIiwicmV0IiwiJFVpbnQ4QXJyYXlQb2x5ZmlsbCIsImRlY29kZSIsIk1hdGgiLCJmbG9vciIsImFyciIsIm9uZSIsInR3byIsInRocmVlIiwiaiIsInYiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLE1BQVAsQ0FBYztBQUFDQyxRQUFNLEVBQUMsTUFBSUE7QUFBWixDQUFkO0FBQUE7QUFFQSxNQUFNQyxhQUFhLEdBQUcsa0VBQXRCO0FBRUEsTUFBTUMsWUFBWSxHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBYyxJQUFkLENBQXJCOztBQUVBLE1BQU1DLE9BQU8sR0FBR0MsR0FBRyxJQUFJTCxhQUFhLENBQUNNLE1BQWQsQ0FBcUJELEdBQXJCLENBQXZCOztBQUNBLE1BQU1FLE1BQU0sR0FBR0MsRUFBRSxJQUFJQSxFQUFFLEtBQUssR0FBUCxHQUFhLENBQUMsQ0FBZCxHQUFrQlAsWUFBWSxDQUFDTyxFQUFELENBQW5EOztBQUVBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1QsYUFBYSxDQUFDVSxNQUFsQyxFQUEwQ0QsQ0FBQyxFQUEzQyxFQUErQztBQUM3Q1IsY0FBWSxDQUFDRyxPQUFPLENBQUNLLENBQUQsQ0FBUixDQUFaLEdB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QWdDRDs7QUFFRCxTQUFPTCxHQUFQO0FBQ0QsQ0F2REQ7O0FBeURPLE1BQU1qQyxNQUFNLEdBQUc7QUFBRVksUUFBRjtBQUFVa0IsUUFBVjtBQUFrQmY7QUFBbEIsQ0FBZixDIiwiZmlsZSI6Ii9wYWNrYWdlcy9iYXNlNjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCYXNlIDY0IGVuY29kaW5nXG5cbmNvbnN0IEJBU0VfNjRfQ0hBUlMgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIjtcblxuY29uc3QgQkFTRV82NF9WQUxTID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuY29uc3QgZ2V0Q2hhciA9IHZhbCA9PiBCQVNFXzY0X0NIQVJTLmNoYXJBdCh2YWwpO1xuY29uc3QgZ2V0VmFsID0gY2ggPT4gY2ggPT09ICc9JyA/IC0xIDogQkFTRV82NF9WQUxTW2NoXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBCQVNFXzY0X0NIQVJTLmxlbmd0aDsgaSsrKSB7XG4gIEJBU0VfNjRfVkFMU1tnZXRDaGFyKGkpXSA9IGk7XG59O1xuXG5jb25zdCBlbmNvZGUgPSBhcnJheSA9PiB7XG4gIGlmICh0eXBlb2YgYXJyYXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBzdHIgPSBhcnJheTtcbiAgICBhcnJheSA9IG5ld0JpbmFyeShzdHIubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2ggPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmIChjaCA+IDB4RkYpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiTm90IGFzY2lpLiBCYXNlNjQuZW5jb2RlIGNhbiBvbmx5IHRha2UgYXNjaWkgc3RyaW5ncy5cIik7XG4gICAgICB9XG5cbiAgICAgIGFycmF5W2ldID0gY2g7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYW5zd2VyID0gW107XG4gIGxldCBhID0gbnVsbDtcbiAgbGV0IGIgPSBudWxsO1xuICBsZXQgYyA9IG51bGw7XG4gIGxldCBkID0gbnVsbDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgc3dpdGNoIChpICUgMykge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBhID0gKGFycmF5W2ldID4+IDIpICYgMHgzRjtcbiAgICAgICAgYiA9IChhcnJheVtpXSAmIDB4MDMpIDw8IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBiID0gYiB8IChhcnJheVtpXSA+PiA0KSAmIDB4RjtcbiAgICAgICAgYyA9IChhcnJheVtpXSAmIDB4RikgPDwgMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGMgPSBjIHwgKGFycmF5W2ldID4+IDYpICYgMHgwMztcbiAgICAgICAgZCA9IGFycmF5W2ldICYgMHgzRjtcbiAgICAgICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihhKSk7XG4gICAgICAgIGFuc3dlci5wdXNoKGdldENoYXIoYikpO1xuICAgICAgICBhbnN3ZXIucHVzaChnZXRDaGFyKGMpKTtcbiAgICAgICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihkKSk7XG4gICAgICAgIGEgPSBudWxsO1xuICAgICAgICBiID0gbnVsbDtcbiAgICAgICAgYyA9IG51bGw7XG4gICAgICAgIGQgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoYSAhPSBudWxsKSB7XG4gICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihhKSk7XG4gICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihiKSk7XG4gICAgaWYgKGMgPT0gbnVsbCkge1xuICAgICAgYW5zd2VyLnB1c2goJz0nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYW5zd2VyLnB1c2goZ2V0Q2hhcihjKSk7XG4gICAgfVxuXG4gICAgaWYgKGQgPT0gbnVsbCkge1xuICAgICAgYW5zd2VyLnB1c2goJz0nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYW5zd2VyLmpvaW4oXCJcIik7XG59O1xuXG5cblxuLy8gWFhYIFRoaXMgaXMgYSB3ZWlyZCBwbGFjZSBmb3IgdGhpcyB0byBsaXZlLCBidXQgaXQncyB1c2VkIGJvdGggYnlcbi8vIHRoaXMgcGFja2FnZSBhbmQgJ2Vqc29uJywgYW5kIHdlIGNhbid0IHB1dCBpdCBpbiAnZWpzb24nIHdpdGhvdXRcbi8vIGludHJvZHVjaW5nIGEgY2lyY3VsYXIgZGVwZW5kZW5jeS4gSXQgc2hvdWxkIHByb2JhYmx5IGJlIGluIGl0cyBvd25cbi8vIHBhY2thZ2Ugb3IgYXMgYSBoZWxwZXIgaW4gYSBwYWNrYWdlIHRoYXQgYm90aCAnYmFzZTY0JyBhbmQgJ2Vqc29uJ1xuLy8gdXNlLlxuY29uc3QgbmV3QmluYXJ5ID0gbGVuID0+IHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgQXJyYXlCdWZmZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgcmV0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgcmV0LnB1c2goMCk7XG4gICAgfVxuXG4gICAgcmV0LiRVaW50OEFycmF5UG9seWZpbGwgPSB0cnVlO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KG5ldyBBcnJheUJ1ZmZlcihsZW4pKTtcbn07XG5cbmNvbnN0IGRlY29kZSA9IHN0ciA9PiB7XG4gIGxldCBsZW4gPSBNYXRoLmZsb29yKChzdHIubGVuZ3RoICogMykgLyA0KTtcbiAgaWYgKHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpID09ICc9Jykge1xuICAgIGxlbi0tO1xuICAgIGlmIChzdHIuY2hhckF0KHN0ci5sZW5ndGggLSAyKSA9PSAnPScpIHtcbiAgICAgIGxlbi0tO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFyciA9IG5ld0JpbmFyeShsZW4pO1xuXG4gIGxldCBvbmUgPSBudWxsO1xuICBsZXQgdHdvID0gbnVsbDtcbiAgbGV0IHRocmVlID0gbnVsbDtcblxuICBsZXQgaiA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjID0gc3RyLmNoYXJBdChpKTtcbiAgICBjb25zdCB2ID0gZ2V0VmFsKGMpO1xuICAgIHN3aXRjaCAoaSAlIDQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaWYgKHYgPCAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJhc2U2NCBzdHJpbmcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uZSA9IHYgPDwgMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmICh2IDwgMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBiYXNlNjQgc3RyaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBvbmUgPSBvbmUgfCAodiA+PiA0KTtcbiAgICAgICAgYXJyW2orK10gPSBvbmU7XG4gICAgICAgIHR3byA9ICh2ICYgMHgwRikgPDwgNDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGlmICh2ID49IDApIHtcbiAgICAgICAgICB0d28gPSB0d28gfCAodiA+PiAyKTtcbiAgICAgICAgICBhcnJbaisrXSA9IHR3bztcbiAgICAgICAgICB0aHJlZSA9ICh2ICYgMHgwMykgPDwgNjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBpZiAodiA+PSAwKSB7XG4gICAgICAgICAgYXJyW2orK10gPSB0aHJlZSB8IHY7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXJyO1xufTtcblxuZXhwb3J0IGNvbnN0IEJhc2U2NCA9IHsgZW5jb2RlLCBkZWNvZGUsIG5ld0JpbmFyeSB9O1xuIl19

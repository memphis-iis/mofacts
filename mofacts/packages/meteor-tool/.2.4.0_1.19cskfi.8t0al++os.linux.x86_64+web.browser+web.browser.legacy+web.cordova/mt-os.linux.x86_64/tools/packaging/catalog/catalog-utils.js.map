{"version":3,"sources":["/tools/packaging/catalog/catalog-utils.js"],"names":["exports","splitReleaseName","releaseName","parts","split","track","version","length","catalog","require","DEFAULT_TRACK","slice","join","displayRelease","options","prefix","noPrefix","explainIfRefreshFailed","Console","official","offline","refreshFailed","info"],"mappings":"AAAAA,OAAO,CAACC,gBAAR,GAA2B,UAAUC,WAAV,EAAuB;AAChD,MAAIC,KAAK,GAAGD,WAAW,CAACE,KAAZ,CAAkB,GAAlB,CAAZ;AACA,MAAIC,KAAJ,EAAWC,OAAX;;AACA,MAAIH,KAAK,CAACI,MAAN,KAAiB,CAArB,EAAwB;AACtB,QAAIC,OAAO,GAAGC,OAAO,CAAC,cAAD,CAArB;;AACAJ,IAAAA,KAAK,GAAGG,OAAO,CAACE,aAAhB;AACAJ,IAAAA,OAAO,GAAGH,KAAK,CAAC,CAAD,CAAf;AACD,GAJD,MAIO;AACLE,IAAAA,KAAK,GAAGF,KAAK,CAAC,CAAD,CAAb,CADK,CAEL;AACA;;AACAG,IAAAA,OAAO,GAAGH,KAAK,CAACQ,KAAN,CAAY,CAAZ,EAAeC,IAAf,CAAoB,GAApB,CAAV;AACD;;AACD,SAAO,CAACP,KAAD,EAAQC,OAAR,CAAP;AACD,CAdD,C,CAgBA;;;AACAN,OAAO,CAACa,cAAR,GAAyB,UAAUR,KAAV,EAAiBC,OAAjB,EAA0BQ,OAA1B,EAAmC;AAC1D,MAAIN,OAAO,GAAGC,OAAO,CAAC,cAAD,CAArB;;AACAK,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,MAAIC,MAAM,GAAGD,OAAO,CAACE,QAAR,GAAmB,EAAnB,GAAwB,SAArC;;AAEA,MAAIX,KAAK,KAAKG,OAAO,CAACE,aAAtB,EAAqC;AACnC,WAAOK,MAAM,GAAGT,OAAhB;AACD,GAFD,MAEO;AACL,WAAOD,KAAK,GAAG,GAAR,GAAcC,OAArB;AACD;AACF,CAVD,C,CAYA;AACA;;;AACAN,OAAO,CAACiB,sBAAR,GAAiC,YAAY;AAC3C,MAAIC,OAAO,GAAGT,OAAO,CAAC,0BAAD,CAAP,CAAoCS,OAAlD;;AACA,MAAIV,OAAO,GAAGC,OAAO,CAAC,cAAD,CAArB;;AACA,MAAID,OAAO,CAACW,QAAR,CAAiBC,OAAjB,IAA4BZ,OAAO,CAACa,aAAxC,EAAuD;AACrDH,IAAAA,OAAO,CAACI,IAAR,CAAa,+CACX,+CADF;AAED;AACF,CAPD","sourcesContent":["exports.splitReleaseName = function (releaseName) {\n  var parts = releaseName.split('@');\n  var track, version;\n  if (parts.length === 1) {\n    var catalog = require('./catalog.js');\n    track = catalog.DEFAULT_TRACK;\n    version = parts[0];\n  } else {\n    track = parts[0];\n    // Do we forbid '@' sign in release versions? I sure hope so, but let's\n    // be careful.\n    version = parts.slice(1).join(\"@\");\n  }\n  return [track, version];\n};\n\n// Options: noPrefix: do not display 'Meteor ' in front of the version number.\nexports.displayRelease = function (track, version, options) {\n  var catalog = require('./catalog.js');\n  options = options || {};\n  var prefix = options.noPrefix ? \"\" : \"Meteor \";\n\n  if (track === catalog.DEFAULT_TRACK) {\n    return prefix + version;\n  } else {\n    return track + '@' + version;\n  }\n};\n\n// If we have failed to update the catalog, informs the user and advises them to\n// go online for up to date inforation.\nexports.explainIfRefreshFailed = function () {\n  var Console = require('../../console/console.js').Console;\n  var catalog = require('./catalog.js');\n  if (catalog.official.offline || catalog.refreshFailed) {\n    Console.info(\"Your package catalog may be out of date.\\n\" +\n      \"Please connect to the internet and try again.\");\n  }\n};\n"],"file":"tools/packaging/catalog/catalog-utils.js.map"}